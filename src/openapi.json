{
  "openapi": "3.0.3",
  "paths": {
    "/api/blog": {
      "get": {
        "tags": [
          "Blog"
        ],
        "summary": "Listar entradas publicadas",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "draft",
                "published",
                "archived"
              ]
            }
          },
          {
            "name": "tag",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Listado paginado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BlogPostListResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Blog"
        ],
        "summary": "Crear entrada",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BlogPostCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Entrada creada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BlogPostResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos invalidos"
          },
          "403": {
            "description": "No autorizado"
          }
        }
      }
    },
    "/api/blog/{slug}": {
      "get": {
        "tags": [
          "Blog"
        ],
        "summary": "Detalle por slug",
        "parameters": [
          {
            "name": "slug",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Entrada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BlogPostResponse"
                }
              }
            }
          },
          "404": {
            "description": "No encontrada"
          }
        }
      }
    },
    "/api/blog/{id}": {
      "patch": {
        "tags": [
          "Blog"
        ],
        "summary": "Actualizar entrada",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BlogPostUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Entrada actualizada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BlogPostResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos invalidos"
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "No encontrada"
          }
        }
      },
      "delete": {
        "tags": [
          "Blog"
        ],
        "summary": "Eliminar entrada",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Entrada eliminada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BlogPostDeleteResponse"
                }
              }
            }
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "No encontrada"
          }
        }
      }
    },
    "/api/auth/register": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Registro de usuario",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Usuario creado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponseUser"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "409": {
            "description": "Usuario ya existe"
          }
        }
      }
    },
    "/api/auth/login": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Iniciar sesión (setea cookies HttpOnly)",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login OK (Set-Cookie: accessToken, refreshToken)",
            "headers": {
              "Set-Cookie": {
                "description": "accessToken y refreshToken como HttpOnly cookies",
                "schema": {
                  "type": "string"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponseAuth"
                }
              }
            }
          },
          "401": {
            "description": "Credenciales inválidas / usuario no verificado"
          },
          "403": {
            "description": "Cuenta deshabilitada"
          }
        }
      }
    },
    "/api/auth/me": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "Obtener usuario autenticado",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "responses": {
          "200": {
            "description": "Usuario autenticado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponseUser"
                }
              }
            }
          },
          "401": {
            "description": "Token inválido o expirado"
          }
        }
      }
    },
    "/api/auth/refresh-token": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "Rotar tokens (refresh → nuevos cookies)",
        "security": [
          {
            "basicAuth": [],
            "refreshCookie": []
          }
        ],
        "responses": {
          "200": {
            "description": "Tokens rotados (Set-Cookie)",
            "headers": {
              "Set-Cookie": {
                "description": "accessToken y refreshToken renovados",
                "schema": {
                  "type": "string"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponseUserBasic"
                }
              }
            }
          },
          "401": {
            "description": "Sesión inválida / expirada"
          }
        }
      }
    },
    "/api/auth/verify-email": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "Verificar cuenta por email",
        "parameters": [
          {
            "name": "token",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Token de verificación (24h)"
          }
        ],
        "responses": {
          "200": {
            "description": "Cuenta verificada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponseMessage"
                }
              }
            }
          },
          "400": {
            "description": "Token inválido/expirado"
          },
          "404": {
            "description": "Usuario no encontrado"
          }
        }
      }
    },
    "/api/auth/logout": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "Cerrar sesión (revoca refresh actual y limpia cookies)",
        "security": [
          {
            "basicAuth": [],
            "refreshCookie": []
          }
        ],
        "responses": {
          "200": {
            "description": "Sesión cerrada",
            "headers": {
              "Set-Cookie": {
                "description": "Limpieza de accessToken y refreshToken",
                "schema": {
                  "type": "string"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponseMessage"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/forgot-password": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Solicitar enlace de recuperación",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ForgotPasswordRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Correo enviado (si corresponde)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponseMessage"
                }
              }
            }
          },
          "500": {
            "description": "Fallo al enviar correo"
          }
        }
      }
    },
    "/api/auth/reset-password": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Restablecer contraseña con token",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ResetPasswordRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contraseña actualizada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponseMessage"
                }
              }
            }
          },
          "400": {
            "description": "Token inválido/expirado o datos inválidos"
          },
          "404": {
            "description": "Usuario no encontrado"
          }
        }
      }
    },
    "/api/users": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Listar usuarios (paginado)",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 1,
              "minimum": 1
            }
          },
          {
            "name": "perPage",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 10,
              "minimum": 1,
              "maximum": 100
            }
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "email | username | phone"
          },
          {
            "name": "sortBy",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "createdAt",
                "email",
                "username"
              ]
            }
          },
          {
            "name": "sortOrder",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UsersListResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Crear usuario",
        "description": "Solo administradores.",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Creado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponseUser"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "409": {
            "description": "Usuario ya existe"
          }
        }
      }
    },
    "/api/users/{id}": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Obtener un usuario",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponseUser"
                }
              }
            }
          },
          "404": {
            "description": "Usuario no encontrado"
          }
        }
      },
      "patch": {
        "tags": [
          "Users"
        ],
        "summary": "Actualizar usuario",
        "description": "El propio usuario puede editar su perfil. Campos sensibles (email/password) tienen endpoints dedicados. Cambios de role/status requieren admin.",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponseUser"
                }
              }
            }
          },
          "403": {
            "description": "No autorizado para cambiar role/status"
          },
          "404": {
            "description": "Usuario no encontrado"
          },
          "409": {
            "description": "Valor duplicado (username, etc.)"
          }
        }
      },
      "delete": {
        "tags": [
          "Users"
        ],
        "summary": "Eliminar (soft-delete) usuario",
        "description": "Deshabilita la cuenta, revoca sesiones y (opcional) anonimiza PII.",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Usuario deshabilitado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponseMessage"
                }
              }
            }
          },
          "404": {
            "description": "Usuario no encontrado"
          }
        }
      }
    },
    "/api/users/me/password": {
      "patch": {
        "tags": [
          "Users"
        ],
        "summary": "Cambiar contraseña",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PasswordChangeRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contraseña actualizada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponseMessage"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos o misma contraseña"
          },
          "401": {
            "description": "No autenticado / token inválido"
          }
        }
      }
    },
    "/api/users/me/profile-image": {
      "patch": {
        "tags": [
          "Users"
        ],
        "summary": "Actualizar imagen de perfil",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProfileImageUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Imagen actualizada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponseMessage"
                }
              }
            }
          },
          "400": {
            "description": "Falta o es inválida la URL"
          },
          "401": {
            "description": "No autenticado"
          }
        }
      }
    },
    "/api/upload-image/single": {
      "post": {
        "tags": [
          "Upload"
        ],
        "summary": "Subir una imagen",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "image": {
                    "type": "string",
                    "format": "binary",
                    "description": "Archivo de imagen"
                  },
                  "folder": {
                    "type": "string",
                    "description": "Carpeta destino (opcional). Ej: general, products/123"
                  }
                },
                "required": [
                  "image"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "success",
                    "url"
                  ],
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "url": {
                      "type": "string",
                      "example": "/uploads/general/abc.jpg"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Archivo faltante o formato inválido"
          }
        }
      }
    },
    "/api/upload-image/multiple": {
      "post": {
        "tags": [
          "Upload"
        ],
        "summary": "Subir múltiples imágenes",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "images": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    },
                    "maxItems": 5,
                    "description": "Hasta 5 archivos"
                  },
                  "folder": {
                    "type": "string",
                    "description": "Carpeta destino (opcional)"
                  }
                },
                "required": [
                  "images"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "success",
                    "urls"
                  ],
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "urls": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "/uploads/general/a.jpg",
                        "/uploads/general/b.jpg"
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Archivos faltantes o formato inválido"
          }
        }
      }
    },
    "/api/products": {
      "get": {
        "tags": [
          "Products"
        ],
        "summary": "Listar productos",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "active",
                "inactive",
                "draft",
                "out_of_stock"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Listado paginado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductListResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Products"
        ],
        "summary": "Crear producto",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Producto creado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "403": {
            "description": "No autorizado"
          }
        }
      }
    },
    "/api/products/{id}": {
      "get": {
        "tags": [
          "Products"
        ],
        "summary": "Detalle de producto",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Detalle",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductResponse"
                }
              }
            }
          },
          "400": {
            "description": "ID inválido"
          },
          "404": {
            "description": "Producto no encontrado"
          }
        }
      },
      "patch": {
        "tags": [
          "Products"
        ],
        "summary": "Actualizar producto",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Producto no encontrado"
          }
        }
      },
      "delete": {
        "tags": [
          "Products"
        ],
        "summary": "Eliminar producto",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Eliminado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                }
              }
            }
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Producto no encontrado"
          }
        }
      }
    },
    "/api/products/store/{storeId}": {
      "get": {
        "tags": [
          "Products"
        ],
        "summary": "Productos por tienda",
        "parameters": [
          {
            "name": "storeId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Listado paginado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductListResponse"
                }
              }
            }
          },
          "400": {
            "description": "ID inválido"
          }
        }
      }
    },
    "/api/products/featured": {
      "get": {
        "tags": [
          "Products"
        ],
        "summary": "Productos destacados",
        "security": [
          {
            "basicAuth": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 50,
              "default": 12
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Listado de productos destacados",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductListResponse"
                }
              }
            }
          },
          "403": {
            "description": "No autorizado"
          }
        }
      }
    },
    "/api/products/{id}/related": {
      "get": {
        "tags": [
          "Products"
        ],
        "summary": "Productos relacionados",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Listado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductListResponse"
                }
              }
            }
          },
          "400": {
            "description": "ID inválido"
          },
          "404": {
            "description": "Producto no encontrado"
          }
        }
      },
      "post": {
        "tags": [
          "Products"
        ],
        "summary": "Actualizar productos relacionados",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductRelatedRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Producto no encontrado"
          }
        }
      }
    },
    "/api/products/search": {
      "get": {
        "tags": [
          "Products"
        ],
        "summary": "Buscar productos en el marketplace",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "required": true,
            "description": "Termino de busqueda (minimo 2 caracteres)",
            "schema": {
              "type": "string",
              "minLength": 2
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 30,
              "default": 10
            }
          },
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Listado de coincidencias",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductSearchResponse"
                }
              }
            }
          },
          "400": {
            "description": "Parametros invalidos"
          }
        }
      }
    },
    "/api/products/store/{storeId}/search": {
      "get": {
        "tags": [
          "Products"
        ],
        "summary": "Buscar productos por tienda",
        "parameters": [
          {
            "name": "storeId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "q",
            "in": "query",
            "required": true,
            "description": "Termino de busqueda (minimo 2 caracteres)",
            "schema": {
              "type": "string",
              "minLength": 2
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 30,
              "default": 10
            }
          },
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Listado de coincidencias",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductSearchResponse"
                }
              }
            }
          },
          "400": {
            "description": "Parametros invalidos"
          },
          "404": {
            "description": "Tienda no disponible"
          }
        }
      }
    },
    "/api/favorites": {
      "get": {
        "tags": [
          "Favorites"
        ],
        "summary": "Listar favoritos del usuario autenticado",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Listado paginado de favoritos",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FavoriteListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Autenticación requerida"
          }
        }
      }
    },
    "/api/favorites/{productId}": {
      "post": {
        "tags": [
          "Favorites"
        ],
        "summary": "Agregar producto a favoritos",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "productId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Agregado correctamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FavoriteMessageResponse"
                }
              }
            }
          },
          "400": {
            "description": "ID inválido"
          },
          "401": {
            "description": "Autenticación requerida"
          },
          "404": {
            "description": "Producto no disponible"
          }
        }
      },
      "delete": {
        "tags": [
          "Favorites"
        ],
        "summary": "Eliminar producto de favoritos",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "productId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Eliminado correctamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FavoriteMessageResponse"
                }
              }
            }
          },
          "400": {
            "description": "ID inválido"
          },
          "401": {
            "description": "Autenticación requerida"
          },
          "404": {
            "description": "Favorito no encontrado"
          }
        }
      }
    },
    "/api/addresses": {
      "get": {
        "tags": [
          "Addresses"
        ],
        "summary": "Listar direcciones de envío del usuario",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "responses": {
          "200": {
            "description": "Listado de direcciones",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserAddressListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Autenticación requerida"
          }
        }
      },
      "post": {
        "tags": [
          "Addresses"
        ],
        "summary": "Crear una nueva dirección de envío",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserAddressCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Dirección creada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserAddressResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "401": {
            "description": "Autenticación requerida"
          }
        }
      }
    },
    "/api/addresses/{id}": {
      "patch": {
        "tags": [
          "Addresses"
        ],
        "summary": "Actualizar una dirección de envío",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserAddressUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Dirección actualizada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserAddressResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "401": {
            "description": "Autenticación requerida"
          },
          "404": {
            "description": "Dirección no encontrada"
          }
        }
      },
      "delete": {
        "tags": [
          "Addresses"
        ],
        "summary": "Eliminar una dirección de envío",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Dirección eliminada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                }
              }
            }
          },
          "401": {
            "description": "Autenticación requerida"
          },
          "404": {
            "description": "Dirección no encontrada"
          }
        }
      }
    },
    "/api/reviews/product/{productId}": {
      "get": {
        "tags": [
          "Reviews"
        ],
        "summary": "Reseñas por producto",
        "parameters": [
          {
            "name": "productId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Listado paginado de reseñas",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReviewListResponse"
                }
              }
            }
          },
          "400": {
            "description": "ID inválido"
          }
        }
      }
    },
    "/api/reviews/store/{storeId}": {
      "get": {
        "tags": [
          "Reviews"
        ],
        "summary": "Reseñas por tienda",
        "parameters": [
          {
            "name": "storeId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Listado paginado de reseñas de la tienda",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReviewListResponse"
                }
              }
            }
          },
          "400": {
            "description": "ID inválido"
          }
        }
      }
    },
    "/api/reviews": {
      "post": {
        "tags": [
          "Reviews"
        ],
        "summary": "Crear reseña",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReviewCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Creada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReviewResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "401": {
            "description": "No autenticado"
          },
          "409": {
            "description": "Reseña duplicada"
          }
        }
      }
    },
    "/api/reviews/{id}": {
      "patch": {
        "tags": [
          "Reviews"
        ],
        "summary": "Actualizar reseña",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReviewUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Actualizada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReviewResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Reseña no encontrada"
          }
        }
      },
      "delete": {
        "tags": [
          "Reviews"
        ],
        "summary": "Eliminar reseña",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Eliminada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                }
              }
            }
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Reseña no encontrada"
          }
        }
      }
    },
    "/api/categories": {
      "get": {
        "tags": [
          "Category"
        ],
        "summary": "Listar categorías",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Listado paginado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryListResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Category"
        ],
        "summary": "Crear categoría",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CategoryCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Categoría creada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "403": {
            "description": "No autorizado"
          }
        }
      }
    },
    "/api/categories/{id}": {
      "get": {
        "tags": [
          "Category"
        ],
        "summary": "Detalle de categoría",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Detalle",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryResponse"
                }
              }
            }
          },
          "400": {
            "description": "ID inválido"
          },
          "404": {
            "description": "Categoría no encontrada"
          }
        }
      },
      "patch": {
        "tags": [
          "Category"
        ],
        "summary": "Actualizar categoría",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CategoryUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Actualizada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Categoría no encontrada"
          }
        }
      },
      "delete": {
        "tags": [
          "Category"
        ],
        "summary": "Eliminar categoría",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Eliminada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                }
              }
            }
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Categoría no encontrada"
          }
        }
      }
    },
    "/api/stores/create": {
      "post": {
        "tags": [
          "Stores"
        ],
        "summary": "Crear tienda",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StoreCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Tienda creada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StoreResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "401": {
            "description": "No autenticado"
          },
          "409": {
            "description": "El usuario ya posee una tienda"
          }
        }
      }
    },
    "/api/stores/all": {
      "get": {
        "tags": [
          "Stores"
        ],
        "summary": "Listar tiendas",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "perPage",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "active",
                "inactive",
                "banned",
                "deleted"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Listado paginado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StoreListResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/stores/featured": {
      "get": {
        "tags": [
          "Stores"
        ],
        "summary": "Listar tiendas destacadas",
        "responses": {
          "200": {
            "description": "Listado de tiendas destacadas o mejor valoradas",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StoreFeaturedResponse"
                }
              }
            }
          },
          "500": {
            "description": "Error al obtener tiendas destacadas"
          }
        }
      }
    },
    "/api/stores/update/{id}": {
      "patch": {
        "tags": [
          "Stores"
        ],
        "summary": "Actualizar tienda",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StoreUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Actualizada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StoreResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Tienda no encontrada"
          }
        }
      }
    },
    "/api/stores/{id}": {
      "get": {
        "tags": [
          "Stores"
        ],
        "summary": "Detalle de tienda",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Detalle",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StoreDetailResponse"
                }
              }
            }
          },
          "400": {
            "description": "ID inválido"
          },
          "404": {
            "description": "Tienda no encontrada"
          }
        }
      },
      "delete": {
        "tags": [
          "Stores"
        ],
        "summary": "Eliminar tienda",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Eliminada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                }
              }
            }
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Tienda no encontrada"
          }
        }
      }
    },
    "/api/stores/{storeId}/status": {
      "patch": {
        "tags": [
          "Stores"
        ],
        "summary": "Actualizar estado",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "storeId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StoreStatusRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StoreResponse"
                }
              }
            }
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Tienda no encontrada"
          }
        }
      }
    },
    "/api/stores/update-image": {
      "patch": {
        "tags": [
          "Stores"
        ],
        "summary": "Actualizar imágenes",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StoreImagesRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                }
              }
            }
          },
          "400": {
            "description": "Sin imágenes"
          },
          "404": {
            "description": "Tienda no encontrada"
          }
        }
      }
    },
    "/api/taxes": {
      "get": {
        "tags": [
          "Taxes"
        ],
        "summary": "Listar impuestos",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          },
          {
            "name": "type",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "percentage",
                "fixed"
              ]
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "active",
                "inactive",
                "deleted"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Listado paginado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaxListResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Taxes"
        ],
        "summary": "Crear impuesto",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TaxCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Impuesto creado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaxResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "403": {
            "description": "No autorizado"
          }
        }
      }
    },
    "/api/taxes/store/{storeId}": {
      "get": {
        "tags": [
          "Taxes"
        ],
        "summary": "Impuestos por tienda",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "storeId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Listado paginado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaxListResponse"
                }
              }
            }
          },
          "400": {
            "description": "ID inválido"
          }
        }
      }
    },
    "/api/taxes/{id}": {
      "get": {
        "tags": [
          "Taxes"
        ],
        "summary": "Detalle de impuesto",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Detalle",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaxResponse"
                }
              }
            }
          },
          "400": {
            "description": "ID inválido"
          },
          "404": {
            "description": "Impuesto no encontrado"
          }
        }
      },
      "patch": {
        "tags": [
          "Taxes"
        ],
        "summary": "Actualizar impuesto",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TaxUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaxResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Impuesto no encontrado"
          }
        }
      },
      "delete": {
        "tags": [
          "Taxes"
        ],
        "summary": "Eliminar impuesto",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Eliminado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                }
              }
            }
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Impuesto no encontrado"
          }
        }
      }
    },
    "/api/taxes/{id}/restore": {
      "patch": {
        "tags": [
          "Taxes"
        ],
        "summary": "Restaurar impuesto",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Restaurado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaxResponse"
                }
              }
            }
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Impuesto no encontrado"
          }
        }
      }
    },
    "/api/discounts": {
      "get": {
        "tags": [
          "Discounts"
        ],
        "summary": "Listar descuentos",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          },
          {
            "name": "type",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "percentage",
                "fixed"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Listado paginado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DiscountListResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Discounts"
        ],
        "summary": "Crear descuento",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DiscountCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Descuento creado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DiscountResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "403": {
            "description": "No autorizado"
          }
        }
      }
    },
    "/api/discounts/{id}": {
      "get": {
        "tags": [
          "Discounts"
        ],
        "summary": "Detalle de descuento",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Detalle",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DiscountResponse"
                }
              }
            }
          },
          "400": {
            "description": "ID inválido"
          },
          "404": {
            "description": "Descuento no encontrado"
          }
        }
      },
      "patch": {
        "tags": [
          "Discounts"
        ],
        "summary": "Actualizar descuento",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DiscountUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DiscountResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Descuento no encontrado"
          }
        }
      },
      "delete": {
        "tags": [
          "Discounts"
        ],
        "summary": "Eliminar descuento",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Eliminado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                }
              }
            }
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Descuento no encontrado"
          }
        }
      }
    },
    "/api/discounts/{id}/restore": {
      "patch": {
        "tags": [
          "Discounts"
        ],
        "summary": "Restaurar descuento",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Restaurado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DiscountResponse"
                }
              }
            }
          },
          "404": {
            "description": "Descuento no encontrado"
          }
        }
      }
    },
    "/api/shipping/store/{storeId}": {
      "get": {
        "tags": [
          "Shipping"
        ],
        "summary": "Métodos de envío por tienda",
        "parameters": [
          {
            "name": "storeId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Listado de métodos de envío",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShippingMethodListResponse"
                }
              }
            }
          },
          "400": {
            "description": "ID inválido"
          }
        }
      }
    },
    "/api/shipping": {
      "post": {
        "tags": [
          "Shipping"
        ],
        "summary": "Crear método de envío",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ShippingMethodCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Creado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShippingMethodResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "403": {
            "description": "No autorizado"
          }
        }
      }
    },
    "/api/shipping/{id}": {
      "patch": {
        "tags": [
          "Shipping"
        ],
        "summary": "Actualizar método de envío",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ShippingMethodUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShippingMethodResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Método de envío no encontrado"
          }
        }
      },
      "delete": {
        "tags": [
          "Shipping"
        ],
        "summary": "Eliminar método de envío",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Eliminado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                }
              }
            }
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Método de envío no encontrado"
          }
        }
      }
    },
    "/api/promotions": {
      "get": {
        "tags": [
          "Promotions"
        ],
        "summary": "Listar promociones",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          },
          {
            "name": "type",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "automatic",
                "coupon"
              ]
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "active",
                "inactive",
                "deleted"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Listado paginado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PromotionListResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Promotions"
        ],
        "summary": "Crear promoción",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PromotionCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Creada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PromotionResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "403": {
            "description": "No autorizado"
          }
        }
      }
    },
    "/api/promotions/store/{storeId}": {
      "get": {
        "tags": [
          "Promotions"
        ],
        "summary": "Promociones por tienda",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "storeId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Listado paginado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PromotionListResponse"
                }
              }
            }
          },
          "400": {
            "description": "ID inválido"
          }
        }
      }
    },
    "/api/promotions/{id}": {
      "get": {
        "tags": [
          "Promotions"
        ],
        "summary": "Detalle de promoción",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Detalle",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PromotionResponse"
                }
              }
            }
          },
          "400": {
            "description": "ID inválido"
          },
          "404": {
            "description": "Promoción no encontrada"
          }
        }
      },
      "patch": {
        "tags": [
          "Promotions"
        ],
        "summary": "Actualizar promoción",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PromotionUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Actualizada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PromotionResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos"
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Promoción no encontrada"
          }
        }
      },
      "delete": {
        "tags": [
          "Promotions"
        ],
        "summary": "Eliminar promoción",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Eliminada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                }
              }
            }
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Promoción no encontrada"
          }
        }
      }
    },
    "/api/promotions/{id}/restore": {
      "patch": {
        "tags": [
          "Promotions"
        ],
        "summary": "Restaurar promoción",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Restaurada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PromotionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Promoción no encontrada"
          }
        }
      }
    },
    "/api/loyalty/actions": {
      "get": {
        "tags": [
          "Loyalty"
        ],
        "summary": "Listar acciones de lealtad",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "responses": {
          "200": {
            "description": "Listado de acciones",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "": "#/components/schemas/LoyaltyAction"
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "No autorizado"
          }
        }
      },
      "post": {
        "tags": [
          "Loyalty"
        ],
        "summary": "Crear accion personalizada",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "": "#/components/schemas/LoyaltyActionCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Accion creada",
            "content": {
              "application/json": {
                "schema": {
                  "": "#/components/schemas/LoyaltyActionResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos invalidos"
          },
          "403": {
            "description": "No autorizado"
          }
        }
      }
    },
    "/api/loyalty/actions/{id}": {
      "patch": {
        "tags": [
          "Loyalty"
        ],
        "summary": "Actualizar accion",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "": "#/components/schemas/LoyaltyActionUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Accion actualizada",
            "content": {
              "application/json": {
                "schema": {
                  "": "#/components/schemas/LoyaltyActionResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos invalidos"
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "No encontrada"
          }
        }
      }
    },
    "/api/loyalty/assign": {
      "post": {
        "tags": [
          "Loyalty"
        ],
        "summary": "Asignar puntos manualmente",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "": "#/components/schemas/LoyaltyAssignRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Puntos asignados",
            "content": {
              "application/json": {
                "schema": {
                  "": "#/components/schemas/LoyaltyAssignResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos invalidos"
          },
          "403": {
            "description": "No autorizado"
          }
        }
      }
    },
    "/api/loyalty/accounts/me": {
      "get": {
        "tags": [
          "Loyalty"
        ],
        "summary": "Consultar mis puntos",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Estado de cuenta",
            "content": {
              "application/json": {
                "schema": {
                  "": "#/components/schemas/LoyaltyAccountResponse"
                }
              }
            }
          },
          "401": {
            "description": "No autenticado"
          }
        }
      }
    },
    "/api/loyalty/accounts/{userId}": {
      "get": {
        "tags": [
          "Loyalty"
        ],
        "summary": "Consultar puntos de un usuario",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Estado de cuenta",
            "content": {
              "application/json": {
                "schema": {
                  "": "#/components/schemas/LoyaltyAccountResponse"
                }
              }
            }
          },
          "400": {
            "description": "Parametros invalidos"
          },
          "403": {
            "description": "No autorizado"
          }
        }
      }
    },
    "/api/loyalty/redeem": {
      "post": {
        "tags": [
          "Loyalty"
        ],
        "summary": "Canjear puntos",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "": "#/components/schemas/LoyaltyRedeemRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Canje realizado",
            "content": {
              "application/json": {
                "schema": {
                  "": "#/components/schemas/LoyaltyRedeemResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos invalidos"
          },
          "401": {
            "description": "No autenticado"
          },
          "403": {
            "description": "No autorizado"
          }
        }
      }
    },
    "/api/loyalty/orders/{orderId}/award": {
      "post": {
        "tags": [
          "Loyalty"
        ],
        "summary": "Forzar recalculo de puntos de una orden",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "orderId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Puntos procesados",
            "content": {
              "application/json": {
                "schema": {
                  "": "#/components/schemas/LoyaltyOrderAwardResponse"
                }
              }
            }
          },
          "400": {
            "description": "Parametros invalidos"
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Orden no encontrada"
          }
        }
      }
    },
    "/api/orders": {
      "get": {
        "tags": [
          "Orders"
        ],
        "summary": "Listar ordenes",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "processing",
                "paid",
                "shipped",
                "completed",
                "cancelled"
              ]
            }
          },
          {
            "name": "storeId",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "userId",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Listado paginado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderListResponse"
                }
              }
            }
          },
          "403": {
            "description": "No autorizado"
          }
        }
      },
      "post": {
        "tags": [
          "Orders"
        ],
        "summary": "Crear una orden",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OrderCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Orden creada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos invalidos"
          },
          "401": {
            "description": "No autenticado"
          }
        }
      }
    },
    "/api/orders/my": {
      "get": {
        "tags": [
          "Orders"
        ],
        "summary": "Listar mis ordenes",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "processing",
                "paid",
                "shipped",
                "completed",
                "cancelled"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Listado paginado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderListResponse"
                }
              }
            }
          },
          "401": {
            "description": "No autenticado"
          }
        }
      }
    },
    "/api/orders/store": {
      "get": {
        "tags": [
          "Orders"
        ],
        "summary": "Listar ordenes de la tienda del vendedor",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "processing",
                "paid",
                "shipped",
                "completed",
                "cancelled"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Listado paginado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderListResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos invalidos"
          },
          "403": {
            "description": "No autorizado"
          }
        }
      }
    },
    "/api/orders/{id}": {
      "get": {
        "tags": [
          "Orders"
        ],
        "summary": "Detalle de una orden",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Detalle de la orden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderResponse"
                }
              }
            }
          },
          "400": {
            "description": "Parametros invalidos"
          },
          "401": {
            "description": "No autenticado"
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Orden no encontrada"
          }
        }
      }
    },
    "/api/orders/{id}/status": {
      "patch": {
        "tags": [
          "Orders"
        ],
        "summary": "Actualizar estado de la orden",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OrderStatusUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Estado actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderResponse"
                }
              }
            }
          },
          "400": {
            "description": "Datos invalidos"
          },
          "401": {
            "description": "No autenticado"
          },
          "403": {
            "description": "No autorizado"
          },
          "404": {
            "description": "Orden no encontrada"
          }
        }
      }
    },
    "/api/dashboard/overview": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Resumen de ventas y usuarios",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "rangeStart",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "rangeEnd",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "days",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 180
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Resumen",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardOverviewResponse"
                }
              }
            }
          },
          "400": {
            "description": "Parametros invalidos"
          },
          "401": {
            "description": "No autenticado"
          },
          "403": {
            "description": "No autorizado"
          }
        }
      }
    },
    "/api/dashboard/sales": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Serie temporal de ventas",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "rangeStart",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "rangeEnd",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "days",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 180
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Serie temporal",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardSalesSeriesResponse"
                }
              }
            }
          },
          "400": {
            "description": "Parametros invalidos"
          },
          "403": {
            "description": "No autorizado"
          }
        }
      }
    },
    "/api/dashboard/orders/status": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Conteo de ordenes por estado",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "rangeStart",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "rangeEnd",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "days",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 180
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Estados",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardOrdersStatusResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/dashboard/loyalty": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Metricas de puntos de lealtad",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "rangeStart",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "rangeEnd",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "days",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 180
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Resumen de puntos",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardLoyaltyResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/dashboard/top-products": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Top productos por ingreso",
        "security": [
          {
            "basicAuth": [],
            "accessCookie": []
          }
        ],
        "parameters": [
          {
            "name": "rangeStart",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "rangeEnd",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "days",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 180
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Productos",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardTopProductsResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "ApiResponse": {
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "OK"
          },
          "data": {}
        }
      },
      "ErrorResponse": {
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string",
            "example": "Error"
          },
          "error": {
            "type": [
              "string",
              "object"
            ],
            "nullable": true
          }
        }
      },
      "LoginRequest": {
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "example": "user@example.com"
          },
          "password": {
            "type": "string",
            "example": "********"
          }
        }
      },
      "RegisterRequest": {
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "properties": {
          "email": {
            "type": "string",
            "format": "email"
          },
          "password": {
            "type": "string",
            "minLength": 8
          },
          "username": {
            "type": "string"
          }
        }
      },
      "ForgotPasswordRequest": {
        "type": "object",
        "required": [
          "email"
        ],
        "properties": {
          "email": {
            "type": "string",
            "format": "email"
          }
        }
      },
      "ResetPasswordRequest": {
        "type": "object",
        "required": [
          "token",
          "password"
        ],
        "properties": {
          "token": {
            "type": "string",
            "description": "Token de reset (30m)"
          },
          "password": {
            "type": "string",
            "minLength": 8
          }
        }
      },
      "UserPublic": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "username": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "disabled"
            ]
          },
          "emailVerified": {
            "type": "boolean"
          },
          "isOnline": {
            "type": "boolean"
          },
          "role": {
            "type": "string"
          },
          "lastLogin": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "lastSeenAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "profileImage": {
            "type": "string",
            "nullable": true
          }
        }
      },
      "ApiResponseMessage": {
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "OK"
          }
        }
      },
      "ApiResponseUser": {
        "type": "object",
        "required": [
          "success",
          "message",
          "data"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "Usuario creado"
          },
          "data": {
            "$ref": "#/components/schemas/UserPublic"
          }
        }
      },
      "ApiResponseUserBasic": {
        "type": "object",
        "required": [
          "success",
          "message",
          "data"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "Usuario autenticado"
          },
          "data": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              },
              "email": {
                "type": "string",
                "format": "email"
              },
              "username": {
                "type": "string",
                "nullable": true
              },
              "status": {
                "type": "string",
                "enum": [
                  "active",
                  "disabled"
                ]
              },
              "emailVerified": {
                "type": "boolean"
              }
            }
          }
        }
      },
      "ApiResponseAuth": {
        "type": "object",
        "required": [
          "success",
          "message",
          "data"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "Inicio de sesión exitoso"
          },
          "data": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              },
              "email": {
                "type": "string",
                "format": "email"
              },
              "role": {
                "type": "string"
              }
            }
          }
        }
      },
      "BlogAuthor": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "displayName": {
            "type": "string",
            "nullable": true
          },
          "firstName": {
            "type": "string",
            "nullable": true
          },
          "lastName": {
            "type": "string",
            "nullable": true
          },
          "email": {
            "type": "string",
            "format": "email"
          }
        }
      },
      "BlogPost": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "title": {
            "type": "string"
          },
          "slug": {
            "type": "string"
          },
          "excerpt": {
            "type": "string",
            "nullable": true
          },
          "content": {
            "type": "string"
          },
          "coverImage": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "string",
            "enum": [
              "draft",
              "published",
              "archived"
            ]
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "publishedAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          },
          "author": {
            "$ref": "#/components/schemas/BlogAuthor"
          }
        }
      },
      "BlogPostCreateRequest": {
        "type": "object",
        "required": [
          "title",
          "content"
        ],
        "properties": {
          "title": {
            "type": "string"
          },
          "excerpt": {
            "type": "string"
          },
          "content": {
            "type": "string"
          },
          "coverImage": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "draft",
              "published",
              "archived"
            ]
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "publishedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "BlogPostUpdateRequest": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string"
          },
          "excerpt": {
            "type": "string"
          },
          "content": {
            "type": "string"
          },
          "coverImage": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "draft",
              "published",
              "archived"
            ]
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "publishedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "BlogPostResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "$ref": "#/components/schemas/BlogPost"
          }
        }
      },
      "BlogPostListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/BlogPost"
            }
          },
          "pagination": {
            "type": "object",
            "properties": {
              "total": {
                "type": "integer"
              },
              "page": {
                "type": "integer"
              },
              "limit": {
                "type": "integer"
              },
              "totalPages": {
                "type": "integer"
              },
              "next": {
                "type": "boolean"
              },
              "prev": {
                "type": "boolean"
              }
            }
          }
        }
      },
      "BlogPostDeleteResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "PaginationInfo": {
        "type": "object",
        "properties": {
          "page": {
            "type": "integer",
            "example": 1
          },
          "perPage": {
            "type": "integer",
            "example": 10
          },
          "total": {
            "type": "integer",
            "example": 42
          },
          "totalPages": {
            "type": "integer",
            "example": 5
          }
        }
      },
      "UsersListResponse": {
        "type": "object",
        "required": [
          "success",
          "message",
          "data"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "OK"
          },
          "data": {
            "type": "object",
            "properties": {
              "items": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/UserPublic"
                }
              },
              "pagination": {
                "$ref": "#/components/schemas/PaginationInfo"
              }
            }
          }
        }
      },
      "UserCreateRequest": {
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "properties": {
          "email": {
            "type": "string",
            "format": "email"
          },
          "password": {
            "type": "string",
            "minLength": 8
          },
          "role": {
            "type": "string",
            "enum": [
              "admin",
              "seller",
              "buyer",
              "support"
            ],
            "default": "buyer"
          },
          "username": {
            "type": "string"
          },
          "phone": {
            "type": "string"
          },
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          },
          "displayName": {
            "type": "string"
          }
        }
      },
      "UserUpdateRequest": {
        "type": "object",
        "description": "Campos editables por el usuario. Cambios de role/status requieren admin.",
        "properties": {
          "username": {
            "type": "string"
          },
          "phone": {
            "type": "string"
          },
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          },
          "displayName": {
            "type": "string"
          },
          "profileImage": {
            "type": "string"
          },
          "role": {
            "type": "string",
            "enum": [
              "admin",
              "seller",
              "buyer",
              "support"
            ]
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "disabled"
            ]
          }
        }
      },
      "PasswordChangeRequest": {
        "type": "object",
        "required": [
          "currentPassword",
          "newPassword"
        ],
        "properties": {
          "currentPassword": {
            "type": "string",
            "minLength": 8
          },
          "newPassword": {
            "type": "string",
            "minLength": 8
          }
        }
      },
      "ProfileImageUpdateRequest": {
        "type": "object",
        "required": [
          "profileImage"
        ],
        "properties": {
          "profileImage": {
            "type": "string",
            "description": "URL o ruta local (/uploads/...)"
          }
        }
      },
      "Product": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "sku": {
            "type": [
              "string",
              "null"
            ]
          },
          "price": {
            "type": "number",
            "format": "float"
          },
          "priceFinal": {
            "type": "number",
            "format": "float"
          },
          "stock": {
            "type": "integer"
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "inactive",
              "draft",
              "out_of_stock"
            ]
          },
          "favoritesCount": {
            "type": "integer",
            "example": 12
          },
          "isFavorite": {
            "type": "boolean",
            "example": false,
            "description": "Indica si el producto forma parte de los favoritos del usuario autenticado"
          },
          "storeId": {
            "type": "string",
            "format": "uuid"
          },
          "categories": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ProductCategory"
            }
          },
          "taxes": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Tax"
            }
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "ProductCategory": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "slug": {
            "type": "string"
          }
        }
      },
      "ProductCreateRequest": {
        "type": "object",
        "required": [
          "name",
          "description",
          "price",
          "priceFinal",
          "stock",
          "categories",
          "storeId"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "sku": {
            "type": "string"
          },
          "price": {
            "type": "number",
            "format": "float"
          },
          "priceFinal": {
            "type": "number",
            "format": "float"
          },
          "stock": {
            "type": "integer"
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "categories": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid"
            }
          },
          "taxes": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid"
            }
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "inactive",
              "draft",
              "out_of_stock"
            ],
            "default": "active"
          },
          "metaTitle": {
            "type": "string"
          },
          "metaDescription": {
            "type": "string"
          },
          "storeId": {
            "type": "string",
            "format": "uuid"
          }
        }
      },
      "ProductUpdateRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "sku": {
            "type": "string"
          },
          "price": {
            "type": "number",
            "format": "float"
          },
          "priceFinal": {
            "type": "number",
            "format": "float"
          },
          "stock": {
            "type": "integer"
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "categories": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid"
            }
          },
          "taxes": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid"
            }
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "inactive",
              "draft",
              "out_of_stock"
            ]
          },
          "metaTitle": {
            "type": "string"
          },
          "metaDescription": {
            "type": "string"
          }
        }
      },
      "ProductRelatedRequest": {
        "type": "object",
        "required": [
          "relatedProductIds"
        ],
        "properties": {
          "relatedProductIds": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid"
            }
          }
        }
      },
      "ProductListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "OK"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Product"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/PaginationMeta"
          }
        }
      },
      "ProductResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "OK"
          },
          "data": {
            "$ref": "#/components/schemas/Product"
          }
        }
      },
      "PaginationMeta": {
        "type": "object",
        "properties": {
          "page": {
            "type": "integer",
            "example": 1
          },
          "limit": {
            "type": "integer",
            "example": 10
          },
          "total": {
            "type": "integer",
            "example": 10
          },
          "totalPages": {
            "type": "integer",
            "example": 1
          },
          "next": {
            "type": "boolean",
            "example": false
          },
          "prev": {
            "type": "boolean",
            "example": false
          }
        }
      },
      "MessageResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "Promoción eliminada"
          }
        }
      },
      "ProductSearchResult": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "price": {
            "type": "number",
            "format": "float"
          },
          "priceFinal": {
            "type": "number",
            "format": "float"
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "stock": {
            "type": "integer"
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "inactive",
              "draft",
              "out_of_stock"
            ]
          },
          "store": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid"
              },
              "name": {
                "type": "string"
              },
              "status": {
                "type": "string",
                "enum": [
                  "pending",
                  "active",
                  "inactive",
                  "banned",
                  "deleted"
                ]
              }
            }
          },
          "favoritesCount": {
            "type": "integer",
            "example": 12
          },
          "isFavorite": {
            "type": "boolean",
            "example": false
          },
          "sku": {
            "type": "string"
          }
        }
      },
      "ProductSearchResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "Resultados de busqueda"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ProductSearchResult"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/PaginationMeta"
          }
        }
      },
      "FavoriteProduct": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "price": {
            "type": "number",
            "format": "float"
          },
          "priceFinal": {
            "type": "number",
            "format": "float"
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "inactive",
              "draft",
              "out_of_stock"
            ]
          },
          "favoritesCount": {
            "type": "integer",
            "example": 42
          },
          "isFavorite": {
            "type": "boolean",
            "example": true,
            "description": "Siempre true en el contexto de favoritos"
          },
          "store": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid"
              },
              "name": {
                "type": "string"
              },
              "status": {
                "type": "string",
                "enum": [
                  "pending",
                  "active",
                  "inactive",
                  "banned",
                  "deleted"
                ]
              }
            }
          }
        }
      },
      "FavoriteItem": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "userId": {
            "type": "string",
            "format": "uuid"
          },
          "productId": {
            "type": "string",
            "format": "uuid"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "product": {
            "$ref": "#/components/schemas/FavoriteProduct"
          }
        }
      },
      "FavoriteListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "Favoritos"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FavoriteItem"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/PaginationMeta"
          }
        }
      },
      "FavoriteMessageResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "Producto agregado a favoritos"
          }
        }
      },
      "ShippingAddress": {
        "type": "object",
        "properties": {
          "country": {
            "type": "string",
            "example": "Dominican Republic"
          },
          "state": {
            "type": "string",
            "example": "Distrito Nacional"
          },
          "city": {
            "type": "string",
            "example": "Santo Domingo"
          },
          "postalCode": {
            "type": "string",
            "example": "10101"
          },
          "street": {
            "type": "string",
            "example": "Calle Las Palmeras #123"
          },
          "note": {
            "type": "string",
            "example": "Portón azul, tocar dos veces",
            "nullable": true
          }
        },
        "required": [
          "country",
          "state",
          "city",
          "postalCode",
          "street"
        ]
      },
      "UserAddress": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "label": {
            "type": "string",
            "nullable": true
          },
          "address": {
            "$ref": "#/components/schemas/ShippingAddress"
          },
          "isDefault": {
            "type": "boolean",
            "example": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "UserAddressCreateRequest": {
        "type": "object",
        "properties": {
          "label": {
            "type": "string",
            "example": "Casa"
          },
          "address": {
            "$ref": "#/components/schemas/ShippingAddress"
          },
          "isDefault": {
            "type": "boolean",
            "example": true,
            "description": "Si es true, esta dirección reemplaza la predeterminada actual"
          }
        },
        "required": [
          "address"
        ]
      },
      "UserAddressUpdateRequest": {
        "type": "object",
        "properties": {
          "label": {
            "type": "string",
            "example": "Oficina"
          },
          "address": {
            "$ref": "#/components/schemas/ShippingAddress"
          },
          "isDefault": {
            "type": "boolean",
            "example": true
          }
        }
      },
      "UserAddressResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "Direccion creada"
          },
          "data": {
            "$ref": "#/components/schemas/UserAddress"
          }
        }
      },
      "UserAddressListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "Direcciones obtenidas"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UserAddress"
            }
          }
        }
      },
      "Review": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "rating": {
            "type": "integer",
            "minimum": 1,
            "maximum": 5
          },
          "comment": {
            "type": [
              "string",
              "null"
            ]
          },
          "productId": {
            "type": "string",
            "format": "uuid"
          },
          "storeId": {
            "type": "string",
            "format": "uuid"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          },
          "user": {
            "$ref": "#/components/schemas/UserPublic"
          }
        }
      },
      "ReviewCreateRequest": {
        "type": "object",
        "required": [
          "productId",
          "rating"
        ],
        "properties": {
          "productId": {
            "type": "string",
            "format": "uuid"
          },
          "rating": {
            "type": "integer",
            "minimum": 1,
            "maximum": 5
          },
          "comment": {
            "type": "string"
          }
        }
      },
      "ReviewUpdateRequest": {
        "type": "object",
        "properties": {
          "rating": {
            "type": "integer",
            "minimum": 1,
            "maximum": 5
          },
          "comment": {
            "type": "string"
          }
        }
      },
      "ReviewResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "OK"
          },
          "data": {
            "$ref": "#/components/schemas/Review"
          }
        }
      },
      "ReviewListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "OK"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Review"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/PaginationMeta"
          }
        }
      },
      "Category": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "slug": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CategoryCreateRequest": {
        "type": "object",
        "required": [
          "name"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "slug": {
            "type": "string"
          }
        }
      },
      "CategoryUpdateRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "slug": {
            "type": "string"
          }
        }
      },
      "CategoryListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "OK"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Category"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/PaginationMeta"
          }
        }
      },
      "CategoryResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "OK"
          },
          "data": {
            "$ref": "#/components/schemas/Category"
          }
        }
      },
      "Store": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "tagline": {
            "type": [
              "string",
              "null"
            ]
          },
          "description": {
            "type": "string"
          },
          "email": {
            "type": [
              "string",
              "null"
            ],
            "format": "email"
          },
          "phone": {
            "type": [
              "string",
              "null"
            ]
          },
          "address": {
            "type": [
              "string",
              "null"
            ]
          },
          "website": {
            "type": [
              "string",
              "null"
            ]
          },
          "logo": {
            "type": [
              "string",
              "null"
            ]
          },
          "banner": {
            "type": [
              "string",
              "null"
            ]
          },
          "facebook": {
            "type": [
              "string",
              "null"
            ]
          },
          "instagram": {
            "type": [
              "string",
              "null"
            ]
          },
          "twitter": {
            "type": [
              "string",
              "null"
            ]
          },
          "youtube": {
            "type": [
              "string",
              "null"
            ]
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "active",
              "inactive",
              "banned",
              "deleted"
            ]
          },
          "isFeatured": {
            "type": "boolean",
            "example": false
          },
          "featuredUntil": {
            "type": [
              "string",
              "null"
            ],
            "format": "date-time",
            "example": "2025-12-31T23:59:59.000Z"
          },
          "keywords": {
            "type": [
              "string",
              "null"
            ]
          },
          "metaTitle": {
            "type": [
              "string",
              "null"
            ]
          },
          "metaDesc": {
            "type": [
              "string",
              "null"
            ]
          },
          "businessHours": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "type": "object"
            }
          },
          "ownerId": {
            "type": "string",
            "format": "uuid"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "StoreOwner": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "username": {
            "type": [
              "string",
              "null"
            ]
          },
          "displayName": {
            "type": [
              "string",
              "null"
            ]
          },
          "phone": {
            "type": [
              "string",
              "null"
            ]
          },
          "status": {
            "type": "string"
          },
          "role": {
            "type": "string"
          }
        }
      },
      "StoreDetail": {
        "allOf": [
          {
            "$ref": "#/components/schemas/Store"
          },
          {
            "type": "object",
            "properties": {
              "owner": {
                "$ref": "#/components/schemas/StoreOwner"
              },
              "_count": {
                "type": "object",
                "properties": {
                  "products": {
                    "type": "integer"
                  },
                  "reviews": {
                    "type": "integer"
                  }
                }
              }
            }
          }
        ]
      },
      "StoreResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "OK"
          },
          "data": {
            "$ref": "#/components/schemas/Store"
          }
        }
      },
      "StoreDetailResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "OK"
          },
          "data": {
            "$ref": "#/components/schemas/StoreDetail"
          }
        }
      },
      "StoreListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "OK"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/StoreDetail"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/PaginationMeta"
          }
        }
      },
      "StoreMetrics": {
        "type": "object",
        "properties": {
          "ratingAverage": {
            "type": [
              "number",
              "null"
            ],
            "example": 4.8
          },
          "ratingsCount": {
            "type": "integer",
            "example": 12
          },
          "salesCount": {
            "type": "integer",
            "example": 34
          }
        }
      },
      "StoreWithMetrics": {
        "allOf": [
          {
            "$ref": "#/components/schemas/Store"
          },
          {
            "type": "object",
            "properties": {
              "metrics": {
                "$ref": "#/components/schemas/StoreMetrics"
              }
            }
          }
        ]
      },
      "StoreFeaturedResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "Tiendas destacadas"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/StoreWithMetrics"
            }
          }
        }
      },
      "StoreCreateRequest": {
        "type": "object",
        "required": [
          "name",
          "description"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "tagline": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "phone": {
            "type": "string"
          },
          "address": {
            "type": "string"
          },
          "website": {
            "type": "string"
          },
          "logo": {
            "type": "string"
          },
          "banner": {
            "type": "string"
          },
          "profileImage": {
            "type": "string"
          },
          "bannerImage": {
            "type": "string"
          },
          "facebook": {
            "type": "string"
          },
          "instagram": {
            "type": "string"
          },
          "twitter": {
            "type": "string"
          },
          "youtube": {
            "type": "string"
          },
          "keywords": {
            "type": "string"
          },
          "metaTitle": {
            "type": "string"
          },
          "metaDesc": {
            "type": "string"
          },
          "businessHours": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "day": {
                  "type": "string"
                },
                "open": {
                  "type": "string"
                },
                "close": {
                  "type": "string"
                },
                "closed": {
                  "type": "boolean"
                }
              }
            }
          },
          "ownerId": {
            "type": "string",
            "format": "uuid"
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "active",
              "inactive",
              "banned",
              "deleted"
            ]
          }
        }
      },
      "StoreUpdateRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "tagline": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "phone": {
            "type": "string"
          },
          "address": {
            "type": "string"
          },
          "website": {
            "type": "string"
          },
          "logo": {
            "type": "string"
          },
          "banner": {
            "type": "string"
          },
          "profileImage": {
            "type": "string"
          },
          "bannerImage": {
            "type": "string"
          },
          "facebook": {
            "type": "string"
          },
          "instagram": {
            "type": "string"
          },
          "twitter": {
            "type": "string"
          },
          "youtube": {
            "type": "string"
          },
          "keywords": {
            "type": "string"
          },
          "metaTitle": {
            "type": "string"
          },
          "metaDesc": {
            "type": "string"
          },
          "businessHours": {
            "type": "array",
            "items": {
              "type": "object"
            }
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "active",
              "inactive",
              "banned",
              "deleted"
            ]
          }
        }
      },
      "StoreStatusRequest": {
        "type": "object",
        "required": [
          "status"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "active",
              "inactive",
              "banned",
              "deleted"
            ]
          }
        }
      },
      "StoreImagesRequest": {
        "type": "object",
        "properties": {
          "logo": {
            "type": "string"
          },
          "banner": {
            "type": "string"
          }
        }
      },
      "Tax": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "percentage",
              "fixed"
            ]
          },
          "rate": {
            "type": "number",
            "format": "float"
          },
          "description": {
            "type": [
              "string",
              "null"
            ]
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "inactive",
              "deleted"
            ]
          },
          "storeId": {
            "type": "string",
            "format": "uuid"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "TaxListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "OK"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Tax"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/PaginationMeta"
          }
        }
      },
      "TaxResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "OK"
          },
          "data": {
            "$ref": "#/components/schemas/Tax"
          }
        }
      },
      "TaxCreateRequest": {
        "type": "object",
        "required": [
          "name",
          "type",
          "rate"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "percentage",
              "fixed"
            ]
          },
          "rate": {
            "type": "number",
            "format": "float"
          },
          "description": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "inactive",
              "deleted"
            ],
            "default": "active"
          }
        }
      },
      "TaxUpdateRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "percentage",
              "fixed"
            ]
          },
          "rate": {
            "type": "number",
            "format": "float"
          },
          "description": {
            "type": [
              "string",
              "null"
            ]
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "inactive",
              "deleted"
            ]
          }
        }
      },
      "Discount": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "percentage",
              "fixed"
            ]
          },
          "value": {
            "type": "number",
            "format": "float"
          },
          "description": {
            "type": [
              "string",
              "null"
            ]
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "inactive",
              "deleted"
            ]
          },
          "storeId": {
            "type": "string",
            "format": "uuid"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "DiscountCreateRequest": {
        "type": "object",
        "required": [
          "name",
          "type",
          "value"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "percentage",
              "fixed"
            ]
          },
          "value": {
            "type": "number",
            "format": "float"
          },
          "description": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "inactive",
              "deleted"
            ],
            "default": "active"
          }
        }
      },
      "DiscountUpdateRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "percentage",
              "fixed"
            ]
          },
          "value": {
            "type": "number",
            "format": "float"
          },
          "description": {
            "type": [
              "string",
              "null"
            ]
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "inactive",
              "deleted"
            ]
          }
        }
      },
      "DiscountListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "OK"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Discount"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/PaginationMeta"
          }
        }
      },
      "DiscountResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "OK"
          },
          "data": {
            "$ref": "#/components/schemas/Discount"
          }
        }
      },
      "ShippingMethod": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": [
              "string",
              "null"
            ]
          },
          "cost": {
            "type": "number",
            "format": "float"
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "inactive"
            ]
          },
          "storeId": {
            "type": "string",
            "format": "uuid"
          },
          "isDeleted": {
            "type": "boolean"
          },
          "deletedAt": {
            "type": [
              "string",
              "null"
            ],
            "format": "date-time"
          },
          "deletedBy": {
            "type": [
              "string",
              "null"
            ]
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "ShippingMethodCreateRequest": {
        "type": "object",
        "required": [
          "name",
          "cost"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": [
              "string",
              "null"
            ]
          },
          "cost": {
            "type": "number",
            "format": "float",
            "minimum": 0
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "inactive"
            ],
            "default": "active"
          }
        }
      },
      "ShippingMethodUpdateRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": [
              "string",
              "null"
            ]
          },
          "cost": {
            "type": "number",
            "format": "float",
            "minimum": 0
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "inactive"
            ]
          }
        }
      },
      "ShippingMethodResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "OK"
          },
          "data": {
            "$ref": "#/components/schemas/ShippingMethod"
          }
        }
      },
      "ShippingMethodListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "OK"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ShippingMethod"
            }
          }
        }
      },
      "Promotion": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": [
              "string",
              "null"
            ]
          },
          "type": {
            "type": "string",
            "enum": [
              "automatic",
              "coupon"
            ]
          },
          "value": {
            "type": [
              "number",
              "null"
            ],
            "format": "float"
          },
          "code": {
            "type": [
              "string",
              "null"
            ]
          },
          "startsAt": {
            "type": [
              "string",
              "null"
            ],
            "format": "date-time"
          },
          "endsAt": {
            "type": [
              "string",
              "null"
            ],
            "format": "date-time"
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "inactive",
              "deleted"
            ]
          },
          "storeId": {
            "type": "string",
            "format": "uuid"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "PromotionCreateRequest": {
        "type": "object",
        "required": [
          "name",
          "type"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "automatic",
              "coupon"
            ]
          },
          "value": {
            "type": "number",
            "format": "float"
          },
          "code": {
            "type": "string"
          },
          "startsAt": {
            "type": "string",
            "format": "date-time"
          },
          "endsAt": {
            "type": "string",
            "format": "date-time"
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "inactive",
              "deleted"
            ],
            "default": "active"
          }
        }
      },
      "PromotionUpdateRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "automatic",
              "coupon"
            ]
          },
          "value": {
            "type": "number",
            "format": "float"
          },
          "code": {
            "type": "string"
          },
          "startsAt": {
            "type": "string",
            "format": "date-time"
          },
          "endsAt": {
            "type": "string",
            "format": "date-time"
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "inactive",
              "deleted"
            ]
          }
        }
      },
      "PromotionListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "OK"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Promotion"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/PaginationMeta"
          }
        }
      },
      "PromotionResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "OK"
          },
          "data": {
            "$ref": "#/components/schemas/Promotion"
          }
        }
      },
      "LoyaltyAction": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "key": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "defaultPoints": {
            "type": "integer"
          },
          "isActive": {
            "type": "boolean"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "LoyaltyActionCreate": {
        "type": "object",
        "required": [
          "key",
          "name",
          "defaultPoints"
        ],
        "properties": {
          "key": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "defaultPoints": {
            "type": "integer",
            "minimum": 0
          },
          "isActive": {
            "type": "boolean"
          }
        }
      },
      "LoyaltyActionUpdate": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "defaultPoints": {
            "type": "integer"
          },
          "isActive": {
            "type": "boolean"
          }
        }
      },
      "LoyaltyActionResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "": "#/components/schemas/LoyaltyAction"
          }
        }
      },
      "LoyaltyAssignRequest": {
        "type": "object",
        "required": [
          "userId"
        ],
        "properties": {
          "userId": {
            "type": "string",
            "format": "uuid"
          },
          "actionKey": {
            "type": "string"
          },
          "points": {
            "type": "integer"
          },
          "multiplier": {
            "type": "number"
          },
          "referenceType": {
            "type": "string"
          },
          "referenceId": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "metadata": {
            "type": "object"
          }
        }
      },
      "LoyaltyAssignResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "object",
            "properties": {
              "account": {
                "": "#/components/schemas/LoyaltyAccount"
              },
              "transaction": {
                "": "#/components/schemas/LoyaltyTransaction"
              },
              "action": {
                "": "#/components/schemas/LoyaltyAction"
              }
            }
          }
        }
      },
      "LoyaltyAccount": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "userId": {
            "type": "string",
            "format": "uuid"
          },
          "balance": {
            "type": "integer"
          },
          "lifetimeEarned": {
            "type": "integer"
          },
          "lifetimeRedeemed": {
            "type": "integer"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "LoyaltyTransaction": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "actionId": {
            "type": "string",
            "format": "uuid"
          },
          "referenceType": {
            "type": "string"
          },
          "referenceId": {
            "type": "string"
          },
          "points": {
            "type": "integer"
          },
          "description": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "LoyaltyAccountResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "object",
            "properties": {
              "account": {
                "": "#/components/schemas/LoyaltyAccount"
              },
              "transactions": {
                "type": "array",
                "items": {
                  "": "#/components/schemas/LoyaltyTransaction"
                }
              },
              "redeemablePoints": {
                "type": "integer"
              },
              "redeemableAmount": {
                "type": "number"
              }
            }
          }
        }
      },
      "LoyaltyRedeemRequest": {
        "type": "object",
        "required": [
          "points"
        ],
        "properties": {
          "userId": {
            "type": "string",
            "format": "uuid"
          },
          "points": {
            "type": "integer",
            "minimum": 1
          },
          "note": {
            "type": "string"
          }
        }
      },
      "LoyaltyRedeemResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "object",
            "properties": {
              "account": {
                "": "#/components/schemas/LoyaltyAccount"
              },
              "transaction": {
                "": "#/components/schemas/LoyaltyTransaction"
              },
              "redemption": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "points": {
                    "type": "integer"
                  },
                  "amount": {
                    "type": "number"
                  },
                  "note": {
                    "type": "string"
                  },
                  "createdAt": {
                    "type": "string",
                    "format": "date-time"
                  }
                }
              },
              "amount": {
                "type": "number"
              }
            }
          }
        }
      },
      "LoyaltyOrderAwardResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "object",
            "properties": {
              "account": {
                "": "#/components/schemas/LoyaltyAccount"
              },
              "transaction": {
                "": "#/components/schemas/LoyaltyTransaction"
              },
              "points": {
                "type": "integer"
              },
              "skipped": {
                "type": "boolean"
              }
            }
          }
        }
      },
      "OrderItemProduct": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "price": {
            "type": "number"
          },
          "priceFinal": {
            "type": "number"
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "OrderItem": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "orderId": {
            "type": "string",
            "format": "uuid"
          },
          "productId": {
            "type": "string",
            "format": "uuid"
          },
          "quantity": {
            "type": "integer"
          },
          "unitPrice": {
            "type": "number"
          },
          "unitPriceFinal": {
            "type": "number"
          },
          "lineSubtotal": {
            "type": "number"
          },
          "lineDiscount": {
            "type": "number"
          },
          "product": {
            "$ref": "#/components/schemas/OrderItemProduct"
          }
        }
      },
      "OrderStore": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "ownerId": {
            "type": [
              "string",
              "null"
            ],
            "format": "uuid"
          }
        }
      },
      "OrderUser": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          }
        }
      },
      "Order": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "userId": {
            "type": "string",
            "format": "uuid"
          },
          "storeId": {
            "type": "string",
            "format": "uuid"
          },
          "promotionId": {
            "type": [
              "string",
              "null"
            ],
            "format": "uuid"
          },
          "discountId": {
            "type": [
              "string",
              "null"
            ],
            "format": "uuid"
          },
          "subtotal": {
            "type": "number"
          },
          "totalDiscountAmount": {
            "type": "number"
          },
          "taxAmount": {
            "type": "number"
          },
          "shippingAmount": {
            "type": "number"
          },
          "total": {
            "type": "number"
          },
          "shippingMethod": {
            "type": [
              "string",
              "null"
            ]
          },
          "shippingAddress": {
            "type": [
              "object",
              "null"
            ]
          },
          "trackingNumber": {
            "type": [
              "string",
              "null"
            ]
          },
          "promotionCodeUsed": {
            "type": [
              "string",
              "null"
            ]
          },
          "priceAdjustments": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "$ref": "#/components/schemas/OrderPriceAdjustment"
            }
          },
          "status": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          },
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/OrderItem"
            }
          },
          "store": {
            "$ref": "#/components/schemas/OrderStore"
          },
          "user": {
            "$ref": "#/components/schemas/OrderUser"
          }
        }
      },
      "OrderPriceAdjustment": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string"
          },
          "code": {
            "type": [
              "string",
              "null"
            ]
          },
          "name": {
            "type": [
              "string",
              "null"
            ]
          },
          "amount": {
            "type": "number"
          }
        }
      },
      "OrderCreateItem": {
        "type": "object",
        "required": [
          "productId",
          "quantity"
        ],
        "properties": {
          "productId": {
            "type": "string",
            "format": "uuid"
          },
          "quantity": {
            "type": "integer",
            "minimum": 1
          }
        }
      },
      "OrderCreateRequest": {
        "type": "object",
        "required": [
          "storeId",
          "items"
        ],
        "properties": {
          "storeId": {
            "type": "string",
            "format": "uuid"
          },
          "userId": {
            "type": "string",
            "format": "uuid"
          },
          "promotionCode": {
            "type": "string"
          },
          "shippingMethod": {
            "type": "string"
          },
          "shippingAddress": {
            "type": "object"
          },
          "items": {
            "type": "array",
            "minItems": 1,
            "items": {
              "$ref": "#/components/schemas/OrderCreateItem"
            }
          }
        }
      },
      "OrderStatusUpdateRequest": {
        "type": "object",
        "required": [
          "status"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "processing",
              "paid",
              "shipped",
              "completed",
              "cancelled"
            ]
          }
        }
      },
      "OrderResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "$ref": "#/components/schemas/Order"
          }
        }
      },
      "OrderListResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Order"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/PaginationMeta"
          }
        }
      },
      "DashboardRange": {
        "type": "object",
        "properties": {
          "start": {
            "type": "string",
            "format": "date-time"
          },
          "end": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "DashboardOverviewResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "object",
            "properties": {
              "range": {
                "$ref": "#/components/schemas/DashboardRange"
              },
              "totalSales": {
                "type": "number"
              },
              "totalSalesPrevious": {
                "type": "number"
              },
              "deltaPercent": {
                "type": "number",
                "nullable": true
              },
              "totalOrders": {
                "type": "integer"
              },
              "totalOrdersPrevious": {
                "type": "integer"
              },
              "ordersDeltaPercent": {
                "type": "number",
                "nullable": true
              },
              "newCustomers": {
                "type": "integer"
              },
              "newCustomersPrevious": {
                "type": "integer"
              },
              "customersDeltaPercent": {
                "type": "number",
                "nullable": true
              }
            }
          }
        }
      },
      "DashboardSalesSeriesResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "object",
            "properties": {
              "range": {
                "$ref": "#/components/schemas/DashboardRange"
              },
              "points": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "date": {
                      "type": "string",
                      "format": "date"
                    },
                    "value": {
                      "type": "number"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "DashboardOrdersStatusResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "object",
            "properties": {
              "range": {
                "$ref": "#/components/schemas/DashboardRange"
              },
              "statuses": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string"
                    },
                    "count": {
                      "type": "integer"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "DashboardLoyaltyResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "object",
            "properties": {
              "range": {
                "$ref": "#/components/schemas/DashboardRange"
              },
              "pointsIssued": {
                "type": "number"
              },
              "pointsRedeemed": {
                "type": "number"
              },
              "outstandingBalance": {
                "type": "number"
              }
            }
          }
        }
      },
      "DashboardTopProductsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "object",
            "properties": {
              "range": {
                "$ref": "#/components/schemas/DashboardRange"
              },
              "products": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "productId": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "revenue": {
                      "type": "number"
                    },
                    "quantity": {
                      "type": "number"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "securitySchemes": {
      "basicAuth": {
        "type": "http",
        "scheme": "basic"
      },
      "accessCookie": {
        "type": "apiKey",
        "in": "cookie",
        "name": "accessToken"
      },
      "refreshCookie": {
        "type": "apiKey",
        "in": "cookie",
        "name": "refreshToken"
      }
    }
  },
  "tags": [
    {
      "name": "Auth"
    },
    {
      "name": "Users"
    },
    {
      "name": "Stores"
    },
    {
      "name": "Products"
    },
    {
      "name": "Category"
    },
    {
      "name": "Reviews"
    },
    {
      "name": "Orders",
      "description": "Operaciones para gestionar ordenes y compras"
    },
    {
      "name": "Taxes"
    },
    {
      "name": "Discounts"
    },
    {
      "name": "Promotions"
    },
    {
      "name": "Shipping"
    },
    {
      "name": "Upload"
    },
    {
      "name": "Blog",
      "description": "Entradas editoriales del marketplace"
    },
    {
      "name": "Sessions"
    },
    {
      "name": "Addresses"
    },
    {
      "name": "Favorites"
    },
    {
      "name": "Loyalty",
      "description": "Programa de puntos y cashback"
    },
    {
      "name": "Dashboard",
      "description": "Metricas agregadas para administracion"
    }
  ],
  "info": {
    "title": "commerceHub API",
    "version": "1.0.0",
    "description": "Documento base. Los módulos agregan paths; los schemas viven aquí."
  },
  "servers": [
    {
      "url": "http://localhost:4000",
      "description": "Local"
    },
    {
      "url": "https://marketplace.bernyabreu.dev/api",
      "description": "Production"
    }
  ]
}